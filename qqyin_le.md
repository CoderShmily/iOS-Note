QQMusic 思路1.搭建界⾯面 2.修改界⾯面的⼀一些内容添加⽑毛玻璃效果 将iconView添加圆⾓角 设置slider的滑块的图⽚片 状态栏的改变3.封装了⼯工具类(Music数据⼯工具) 返回所有的数据 设置当前播放的歌曲的⽅方法 返回当前播放歌曲 获取下⼀一⾸首歌曲 获取上⼀一⾸首歌曲4.开始播放⾳音乐基本界⾯面的设置 设置当前时间和总时间(AVAudioPlayer)开始⾳音乐—>iconView添加动画随着时间改变slider的进度和当前播放时间的Label的⽂文字 5.对滑块的事件处理touchDown—>移除定时器 touchUpInside—>改变歌曲播放的时间/添加定时器 valueChange—>改变滑块的位置/改变当前播放时间的Label的⽂文字 添加点击⼿手势—>获取点击位置的⽐比例—>计算应该歌曲播放时间6.对歌曲事件处理 暂停/播放上⼀一⾸首下⼀一⾸首 当歌曲正常播放完成,⾃自动播放下⼀一⾸首7.添加ScrollView(lrcView)⾃自定义LrcView 在ScrollView中添加tableView—>约束问题8.解析歌词 给ScrollView定义了lrcname属性定义了⼯工具类—>解析歌词—>返回歌词数据(NSArray) tableView展⽰示歌词设置⼀一系列tableView设置tableView额外滚动区域9.显⽰示对应的句歌词 给ScrollView定义了currentTime￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼定义了CADisplayLink—>添加定时器 ⽤用currentTime和lrclist所有的歌词的时间对⽐比 找到应该显⽰示lrclist中的某⼀一句歌词(对应的下标) 刷新该句的歌词(cell)—>让⽂文字变⼤大—> 定义currentIndex—>刷新两句 将当前句的Cell滚动到bottom/top10.当可以显⽰示某⼀一个句歌词之后,让该句歌词渐变效果 ⾃自定义Label—>drawRect—>设置颜⾊色— >UIRectFillUsingBlendMode(设置渐变) 给⾃自定义Label传⼊入进度⾃自定义cell,并且将label加⼊入cell中 拿到当前显⽰示的Cell—>设置label的进度—>当前时间-当前句开始时间/ 下⼀一句的时间-当前句的时间 外⾯面Label—>引⽤用传给ScrollView—>改变显⽰示⽂文字和进度11.后台播放打开后台模式 激活后台模式—>AVAudioSession—>setCategory—>setAction12.设置锁屏界⾯面信息 导⼊入<MediaPlayer>框架 MPNowPlayingInfoCenterplayingInfo—>字典 让应⽤用程序可以接受远程事件